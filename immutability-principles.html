<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Immutability Principles - oscarvarto's blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/immutability-principles.html">

        <meta name="author" content="Oscar Vargas Torres" />
        <meta name="keywords" content="Immutability" />
        <meta name="description" content="" />

        <meta property="og:site_name" content="oscarvarto's blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Immutability Principles"/>
        <meta property="og:url" content="/immutability-principles.html"/>
        <meta property="og:description" content=""/>
        <meta property="article:published_time" content="2018-08-27" />
            <meta property="article:section" content="Functional Programming" />
            <meta property="article:tag" content="Immutability" />
            <meta property="article:author" content="Oscar Vargas Torres" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/monokai.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
oscarvarto's blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="/category/clustering.html">Clustering</a>
                        </li>
                        <li class="active">
                            <a href="/category/functional-programming.html">Functional programming</a>
                        </li>
                        <li >
                            <a href="/category/setup.html">Setup</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/immutability-principles.html"
                       rel="bookmark"
                       title="Permalink to Immutability Principles">
                        Immutability Principles
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-08-27T00:00:00-05:00"> Mon 27 August 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/immutability.html">Immutability</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mutability-is-hard-to-reason-about">Mutability is hard to reason about<a class="anchor-link" href="#Mutability-is-hard-to-reason-about">¶</a></h2><p>A lot of programming languages support mutability. For example, Python can mutate objects in place (as well as JavaScript and a lot others):</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[2]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[3, 2, 1]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This may not seem problematic at first. A lot of people would argue that it is indeed necessary to program. However, when things can change, we sometimes are forced to understand more details than the bare minimum necessary. For example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># This function is just for ilustration purposes.</span>
<span class="c1"># Imagine a situation where a very long and complex method mutates one of it's arguments...</span>
<span class="k">def</span> <span class="nf">m1</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">"""Reverses its argument"""</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

<span class="n">vowels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">,</span> <span class="s1">'i'</span><span class="p">,</span> <span class="s1">'o'</span><span class="p">,</span> <span class="s1">'u'</span><span class="p">]</span> 
<span class="n">m1</span><span class="p">(</span><span class="n">vowels</span><span class="p">)</span>
<span class="n">vowels</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[3]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['u', 'o', 'i', 'e', 'a']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, we have to dig into the implementation of <code>m1</code>, to understand how the method affects its arguments.</p>
<p>A simpler approach is to rely on immutable data structures/variables. This may seem like a more difficult approach, but it makes programming easier in the long run.</p>
<p>Let's use an immutable approach to the previous problem with <code>pyrsistent</code> Python's library:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pyrsistent</span> <span class="k">import</span> <span class="n">plist</span>
<span class="n">ns1</span> <span class="o">=</span> <span class="n">plist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">ns1</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[4]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>plist([1, 2, 3])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ns2</span> <span class="o">=</span> <span class="n">ns1</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">ns2</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[5]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>plist([3, 2, 1])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Notice that original list remains unmodified (it is a immutable/persistent data structure!)</span>
<span class="n">ns1</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[6]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>plist([1, 2, 3])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functional-programming-relies-on-immutability">Functional programming relies on immutability<a class="anchor-link" href="#Functional-programming-relies-on-immutability">¶</a></h2><p>Immutable data structures/collections exist in a lot of programming languages:</p>
<ul>
<li>Haskell<ul>
<li><a href="https://haskell-containers.readthedocs.io/en/latest/intro.html">https://haskell-containers.readthedocs.io/en/latest/intro.html</a></li>
</ul>
</li>
<li>Scala<ul>
<li><a href="https://docs.scala-lang.org/overviews/collections/overview.html">https://docs.scala-lang.org/overviews/collections/overview.html</a> </li>
</ul>
</li>
<li>FSharp<ul>
<li><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/fsharp-collection-types">https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/fsharp-collection-types</a></li>
</ul>
</li>
<li>Clojure<ul>
<li><a href="https://clojure.org/reference/data_structures">https://clojure.org/reference/data_structures</a></li>
</ul>
</li>
<li>C#<ul>
<li><a href="https://msdn.microsoft.com/en-us/library/system.collections.immutable(v=vs.111).aspx">https://msdn.microsoft.com/en-us/library/system.collections.immutable(v=vs.111).aspx</a></li>
<li><a href="https://msdn.microsoft.com/en-us/magazine/mt795189.aspx">https://msdn.microsoft.com/en-us/magazine/mt795189.aspx</a></li>
</ul>
</li>
<li>JavaScript<ul>
<li><a href="https://facebook.github.io/immutable-js/">https://facebook.github.io/immutable-js/</a></li>
</ul>
</li>
<li>etc</li>
</ul>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://twitter.com/oscarvarto"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
    <li class="list-group-item"><a href="https://github.com/oscarvarto"><i class="fa fa-github-square fa-lg"></i> github</a></li>
    <li class="list-group-item"><a href="https://www.linkedin.com/in/oscar-vargas-torres-32145546"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://www.scala-lang.org/" target="_blank">Scala-lang.org</a>
    </li>
    <li class="list-group-item">
      <a href="https://python.org/" target="_blank">Python.org</a>
    </li>
    <li class="list-group-item">
      <a href="https://www.haskell.org/" target="_blank">Haskell.org</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Oscar Vargas Torres
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>




</body>
</html>